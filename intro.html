<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Geocomputation with R</title>
  <meta name="description" content="Forthcoming book on geographic data with R.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Geocomputation with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://geocompr.robinlovelace.net" />
  
  <meta property="og:description" content="Forthcoming book on geographic data with R." />
  <meta name="github-repo" content="Robinlovelace/geocompr" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Geocomputation with R" />
  
  <meta name="twitter:description" content="Forthcoming book on geographic data with R." />
  

<meta name="author" content="Robin Lovelace, Jakub Nowosad, Jannes Muenchow">


<meta name="date" content="2018-04-21">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="preface.html">
<link rel="next" href="spatial-class.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.0/leaflet.js"></script>
<script src="libs/leaflet-providers-1.1.17/leaflet-providers.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.0/leaflet-providers-plugin.js"></script>
<link href="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet" />
<script src="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<link href="libs/PopupTable-0.0.1/popup.css" rel="stylesheet" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-99618359-1', 'auto');
  ga('send', 'pageview');

</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Geocomputation with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#development"><i class="fa fa-check"></i>Development</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-contribute"><i class="fa fa-check"></i>How to contribute?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#reproducibility"><i class="fa fa-check"></i>Reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#what-is-geocomputation"><i class="fa fa-check"></i><b>1.1</b> What is geocomputation?</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#why-geocomputation-with-r"><i class="fa fa-check"></i><b>1.2</b> Why Geocomputation with R?</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#software-for-geocomputation"><i class="fa fa-check"></i><b>1.3</b> Software for geocomputation</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#rs-spatial-ecosystem"><i class="fa fa-check"></i><b>1.4</b> R’s spatial ecosystem</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#the-history-of-r-spatial"><i class="fa fa-check"></i><b>1.5</b> The history of R-spatial</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#exercises"><i class="fa fa-check"></i><b>1.6</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>I Basic methods</b></span></li>
<li class="chapter" data-level="2" data-path="spatial-class.html"><a href="spatial-class.html"><i class="fa fa-check"></i><b>2</b> Geographic data in R</a><ul>
<li class="chapter" data-level="" data-path="spatial-class.html"><a href="spatial-class.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="2.1" data-path="spatial-class.html"><a href="spatial-class.html#vector-data"><i class="fa fa-check"></i><b>2.1</b> Vector data</a><ul>
<li class="chapter" data-level="2.1.1" data-path="spatial-class.html"><a href="spatial-class.html#intro-sf"><i class="fa fa-check"></i><b>2.1.1</b> An introduction to simple features</a></li>
<li class="chapter" data-level="2.1.2" data-path="spatial-class.html"><a href="spatial-class.html#why-simple-features"><i class="fa fa-check"></i><b>2.1.2</b> Why simple features?</a></li>
<li class="chapter" data-level="2.1.3" data-path="spatial-class.html"><a href="spatial-class.html#basic-map"><i class="fa fa-check"></i><b>2.1.3</b> Basic map making</a></li>
<li class="chapter" data-level="2.1.4" data-path="spatial-class.html"><a href="spatial-class.html#base-args"><i class="fa fa-check"></i><b>2.1.4</b> Base plot arguments</a></li>
<li class="chapter" data-level="2.1.5" data-path="spatial-class.html"><a href="spatial-class.html#sf-classes"><i class="fa fa-check"></i><b>2.1.5</b> Simple feature classes</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="spatial-class.html"><a href="spatial-class.html#raster-data"><i class="fa fa-check"></i><b>2.2</b> Raster data</a><ul>
<li class="chapter" data-level="2.2.1" data-path="spatial-class.html"><a href="spatial-class.html#an-introduction-to-raster"><i class="fa fa-check"></i><b>2.2.1</b> An introduction to raster</a></li>
<li class="chapter" data-level="2.2.2" data-path="spatial-class.html"><a href="spatial-class.html#basic-map-raster"><i class="fa fa-check"></i><b>2.2.2</b> Basic map making</a></li>
<li class="chapter" data-level="2.2.3" data-path="spatial-class.html"><a href="spatial-class.html#raster-classes"><i class="fa fa-check"></i><b>2.2.3</b> Raster classes</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="spatial-class.html"><a href="spatial-class.html#crs-intro"><i class="fa fa-check"></i><b>2.3</b> Coordinate Reference Systems</a><ul>
<li class="chapter" data-level="2.3.1" data-path="spatial-class.html"><a href="spatial-class.html#geographic-coordinate-systems"><i class="fa fa-check"></i><b>2.3.1</b> Geographic coordinate systems</a></li>
<li class="chapter" data-level="2.3.2" data-path="spatial-class.html"><a href="spatial-class.html#projected-coordinate-systems"><i class="fa fa-check"></i><b>2.3.2</b> Projected coordinate systems</a></li>
<li class="chapter" data-level="2.3.3" data-path="spatial-class.html"><a href="spatial-class.html#crs-in-r"><i class="fa fa-check"></i><b>2.3.3</b> CRSs in R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="spatial-class.html"><a href="spatial-class.html#units"><i class="fa fa-check"></i><b>2.4</b> Units</a></li>
<li class="chapter" data-level="2.5" data-path="spatial-class.html"><a href="spatial-class.html#ex2"><i class="fa fa-check"></i><b>2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="attr.html"><a href="attr.html"><i class="fa fa-check"></i><b>3</b> Attribute operations</a><ul>
<li class="chapter" data-level="" data-path="attr.html"><a href="attr.html#prerequisites-1"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="3.1" data-path="attr.html"><a href="attr.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="attr.html"><a href="attr.html#vector-attribute-manipulation"><i class="fa fa-check"></i><b>3.2</b> Vector attribute manipulation</a><ul>
<li class="chapter" data-level="3.2.1" data-path="attr.html"><a href="attr.html#vector-attribute-subsetting"><i class="fa fa-check"></i><b>3.2.1</b> Vector attribute subsetting</a></li>
<li class="chapter" data-level="3.2.2" data-path="attr.html"><a href="attr.html#vector-attribute-aggregation"><i class="fa fa-check"></i><b>3.2.2</b> Vector attribute aggregation</a></li>
<li class="chapter" data-level="3.2.3" data-path="attr.html"><a href="attr.html#vector-attribute-joining"><i class="fa fa-check"></i><b>3.2.3</b> Vector attribute joining</a></li>
<li class="chapter" data-level="3.2.4" data-path="attr.html"><a href="attr.html#vec-attr-creation"><i class="fa fa-check"></i><b>3.2.4</b> Creating attributes and removing spatial information</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="attr.html"><a href="attr.html#manipulating-raster-objects"><i class="fa fa-check"></i><b>3.3</b> Manipulating raster objects</a><ul>
<li class="chapter" data-level="3.3.1" data-path="attr.html"><a href="attr.html#raster-subsetting"><i class="fa fa-check"></i><b>3.3.1</b> Raster subsetting</a></li>
<li class="chapter" data-level="3.3.2" data-path="attr.html"><a href="attr.html#summarizing-raster-objects"><i class="fa fa-check"></i><b>3.3.2</b> Summarizing raster objects</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="attr.html"><a href="attr.html#exercises-1"><i class="fa fa-check"></i><b>3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="spatial-operations.html"><a href="spatial-operations.html"><i class="fa fa-check"></i><b>4</b> Spatial operations</a><ul>
<li class="chapter" data-level="" data-path="spatial-operations.html"><a href="spatial-operations.html#prerequisites-2"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="4.1" data-path="spatial-operations.html"><a href="spatial-operations.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="spatial-operations.html"><a href="spatial-operations.html#spatial-vec"><i class="fa fa-check"></i><b>4.2</b> Spatial operations on vector data</a><ul>
<li class="chapter" data-level="4.2.1" data-path="spatial-operations.html"><a href="spatial-operations.html#spatial-subsetting"><i class="fa fa-check"></i><b>4.2.1</b> Spatial subsetting</a></li>
<li class="chapter" data-level="4.2.2" data-path="spatial-operations.html"><a href="spatial-operations.html#topological-relations"><i class="fa fa-check"></i><b>4.2.2</b> Topological relations</a></li>
<li class="chapter" data-level="4.2.3" data-path="spatial-operations.html"><a href="spatial-operations.html#spatial-joining"><i class="fa fa-check"></i><b>4.2.3</b> Spatial joining</a></li>
<li class="chapter" data-level="4.2.4" data-path="spatial-operations.html"><a href="spatial-operations.html#non-overlapping-joins"><i class="fa fa-check"></i><b>4.2.4</b> Non-overlapping joins</a></li>
<li class="chapter" data-level="4.2.5" data-path="spatial-operations.html"><a href="spatial-operations.html#spatial-aggr"><i class="fa fa-check"></i><b>4.2.5</b> Spatial data aggregation</a></li>
<li class="chapter" data-level="4.2.6" data-path="spatial-operations.html"><a href="spatial-operations.html#distance-relations"><i class="fa fa-check"></i><b>4.2.6</b> Distance relations</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="spatial-operations.html"><a href="spatial-operations.html#spatial-ras"><i class="fa fa-check"></i><b>4.3</b> Spatial operations on raster data</a><ul>
<li class="chapter" data-level="4.3.1" data-path="attr.html"><a href="attr.html#raster-subsetting"><i class="fa fa-check"></i><b>4.3.1</b> Spatial subsetting</a></li>
<li class="chapter" data-level="4.3.2" data-path="spatial-operations.html"><a href="spatial-operations.html#map-algebra"><i class="fa fa-check"></i><b>4.3.2</b> Map algebra</a></li>
<li class="chapter" data-level="4.3.3" data-path="spatial-operations.html"><a href="spatial-operations.html#local-operations"><i class="fa fa-check"></i><b>4.3.3</b> Local operations</a></li>
<li class="chapter" data-level="4.3.4" data-path="spatial-operations.html"><a href="spatial-operations.html#focal-operations"><i class="fa fa-check"></i><b>4.3.4</b> Focal operations</a></li>
<li class="chapter" data-level="4.3.5" data-path="spatial-operations.html"><a href="spatial-operations.html#zonal-operations"><i class="fa fa-check"></i><b>4.3.5</b> Zonal operations</a></li>
<li class="chapter" data-level="4.3.6" data-path="spatial-operations.html"><a href="spatial-operations.html#global-operations-and-distances"><i class="fa fa-check"></i><b>4.3.6</b> Global operations and distances</a></li>
<li class="chapter" data-level="4.3.7" data-path="spatial-operations.html"><a href="spatial-operations.html#merging-rasters"><i class="fa fa-check"></i><b>4.3.7</b> Merging rasters</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="spatial-operations.html"><a href="spatial-operations.html#exercises-2"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>5</b> Geometric operations</a><ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#prerequisites-3"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="5.1" data-path="transform.html"><a href="transform.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="transform.html"><a href="transform.html#reproj-geo-data"><i class="fa fa-check"></i><b>5.2</b> Reprojecting geographic data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="transform.html"><a href="transform.html#which-crs-to-use"><i class="fa fa-check"></i><b>5.2.1</b> Which CRS to use?</a></li>
<li class="chapter" data-level="5.2.2" data-path="transform.html"><a href="transform.html#reproj-vec-geom"><i class="fa fa-check"></i><b>5.2.2</b> Reprojecting vector geometries</a></li>
<li class="chapter" data-level="5.2.3" data-path="transform.html"><a href="transform.html#modifying-map-projections"><i class="fa fa-check"></i><b>5.2.3</b> Modifying map projections</a></li>
<li class="chapter" data-level="5.2.4" data-path="transform.html"><a href="transform.html#reprojecting-raster-geometries"><i class="fa fa-check"></i><b>5.2.4</b> Reprojecting raster geometries</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="transform.html"><a href="transform.html#geo-vec"><i class="fa fa-check"></i><b>5.3</b> Geometric operations on vector data</a><ul>
<li class="chapter" data-level="5.3.1" data-path="transform.html"><a href="transform.html#simplification"><i class="fa fa-check"></i><b>5.3.1</b> Simplification</a></li>
<li class="chapter" data-level="5.3.2" data-path="transform.html"><a href="transform.html#centroids"><i class="fa fa-check"></i><b>5.3.2</b> Centroids</a></li>
<li class="chapter" data-level="5.3.3" data-path="transform.html"><a href="transform.html#buffers"><i class="fa fa-check"></i><b>5.3.3</b> Buffers</a></li>
<li class="chapter" data-level="5.3.4" data-path="transform.html"><a href="transform.html#affine-transformations"><i class="fa fa-check"></i><b>5.3.4</b> Affine transformations</a></li>
<li class="chapter" data-level="5.3.5" data-path="transform.html"><a href="transform.html#clipping"><i class="fa fa-check"></i><b>5.3.5</b> Clipping</a></li>
<li class="chapter" data-level="5.3.6" data-path="transform.html"><a href="transform.html#geometry-unions"><i class="fa fa-check"></i><b>5.3.6</b> Geometry unions</a></li>
<li class="chapter" data-level="5.3.7" data-path="transform.html"><a href="transform.html#type-trans"><i class="fa fa-check"></i><b>5.3.7</b> Type transformations</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="transform.html"><a href="transform.html#geo-ras"><i class="fa fa-check"></i><b>5.4</b> Geometric operations on raster data</a><ul>
<li class="chapter" data-level="5.4.1" data-path="transform.html"><a href="transform.html#extent-and-origin"><i class="fa fa-check"></i><b>5.4.1</b> Extent and origin</a></li>
<li class="chapter" data-level="5.4.2" data-path="transform.html"><a href="transform.html#aggregation-and-disaggregation"><i class="fa fa-check"></i><b>5.4.2</b> Aggregation and disaggregation</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="transform.html"><a href="transform.html#exercises-3"><i class="fa fa-check"></i><b>5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="read-write.html"><a href="read-write.html"><i class="fa fa-check"></i><b>6</b> Geographic data I/O</a><ul>
<li class="chapter" data-level="" data-path="read-write.html"><a href="read-write.html#prerequisites-4"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="6.1" data-path="read-write.html"><a href="read-write.html#introduction-3"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="read-write.html"><a href="read-write.html#retrieving-data"><i class="fa fa-check"></i><b>6.2</b> Retrieving open data</a></li>
<li class="chapter" data-level="6.3" data-path="read-write.html"><a href="read-write.html#file-formats"><i class="fa fa-check"></i><b>6.3</b> File formats</a></li>
<li class="chapter" data-level="6.4" data-path="read-write.html"><a href="read-write.html#data-input"><i class="fa fa-check"></i><b>6.4</b> Data Input (I)</a><ul>
<li class="chapter" data-level="6.4.1" data-path="read-write.html"><a href="read-write.html#vector-data-1"><i class="fa fa-check"></i><b>6.4.1</b> Vector data</a></li>
<li class="chapter" data-level="6.4.2" data-path="read-write.html"><a href="read-write.html#raster-data-1"><i class="fa fa-check"></i><b>6.4.2</b> Raster data</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="read-write.html"><a href="read-write.html#data-output"><i class="fa fa-check"></i><b>6.5</b> Data output (O)</a><ul>
<li class="chapter" data-level="6.5.1" data-path="read-write.html"><a href="read-write.html#vector-data-2"><i class="fa fa-check"></i><b>6.5.1</b> Vector data</a></li>
<li class="chapter" data-level="6.5.2" data-path="read-write.html"><a href="read-write.html#raster-data-2"><i class="fa fa-check"></i><b>6.5.2</b> Raster data</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="read-write.html"><a href="read-write.html#visual-outputs"><i class="fa fa-check"></i><b>6.6</b> Visual outputs</a></li>
<li class="chapter" data-level="6.7" data-path="read-write.html"><a href="read-write.html#exercises-4"><i class="fa fa-check"></i><b>6.7</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Applied geocomputation</b></span></li>
<li class="chapter" data-level="7" data-path="transport.html"><a href="transport.html"><i class="fa fa-check"></i><b>7</b> Transport applications</a><ul>
<li class="chapter" data-level="" data-path="transport.html"><a href="transport.html#prerequisites-5"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="7.1" data-path="transport.html"><a href="transport.html#introduction-4"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="transport.html"><a href="transport.html#bris-case"><i class="fa fa-check"></i><b>7.2</b> A case study of Bristol</a></li>
<li class="chapter" data-level="7.3" data-path="transport.html"><a href="transport.html#transport-zones"><i class="fa fa-check"></i><b>7.3</b> Transport zones</a></li>
<li class="chapter" data-level="7.4" data-path="transport.html"><a href="transport.html#desire-lines"><i class="fa fa-check"></i><b>7.4</b> Desire lines</a></li>
<li class="chapter" data-level="7.5" data-path="transport.html"><a href="transport.html#routes"><i class="fa fa-check"></i><b>7.5</b> Routes</a></li>
<li class="chapter" data-level="7.6" data-path="transport.html"><a href="transport.html#nodes"><i class="fa fa-check"></i><b>7.6</b> Nodes</a></li>
<li class="chapter" data-level="7.7" data-path="transport.html"><a href="transport.html#route-networks"><i class="fa fa-check"></i><b>7.7</b> Route networks</a></li>
<li class="chapter" data-level="7.8" data-path="transport.html"><a href="transport.html#prioritizing-new-infrastructure"><i class="fa fa-check"></i><b>7.8</b> Prioritizing new infrastructure</a></li>
<li class="chapter" data-level="7.9" data-path="transport.html"><a href="transport.html#future-directions-of-travel"><i class="fa fa-check"></i><b>7.9</b> Future directions of travel</a></li>
<li class="chapter" data-level="7.10" data-path="transport.html"><a href="transport.html#ex-transport"><i class="fa fa-check"></i><b>7.10</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="location.html"><a href="location.html"><i class="fa fa-check"></i><b>8</b> Location analysis</a><ul>
<li class="chapter" data-level="" data-path="location.html"><a href="location.html#prerequisites-6"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="8.1" data-path="location.html"><a href="location.html#introduction-5"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="location.html"><a href="location.html#case-study"><i class="fa fa-check"></i><b>8.2</b> Case study: bike shops in Germany</a></li>
<li class="chapter" data-level="8.3" data-path="location.html"><a href="location.html#tidy-the-input-data"><i class="fa fa-check"></i><b>8.3</b> Tidy the input data</a></li>
<li class="chapter" data-level="8.4" data-path="location.html"><a href="location.html#create-census-rasters"><i class="fa fa-check"></i><b>8.4</b> Create census rasters</a></li>
<li class="chapter" data-level="8.5" data-path="location.html"><a href="location.html#define-metropolitan-areas"><i class="fa fa-check"></i><b>8.5</b> Define metropolitan areas</a></li>
<li class="chapter" data-level="8.6" data-path="location.html"><a href="location.html#points-of-interest"><i class="fa fa-check"></i><b>8.6</b> Points of interest</a></li>
<li class="chapter" data-level="8.7" data-path="location.html"><a href="location.html#identifying-suitable-locations"><i class="fa fa-check"></i><b>8.7</b> Identifying suitable locations</a></li>
<li class="chapter" data-level="8.8" data-path="location.html"><a href="location.html#discussion-and-next-steps"><i class="fa fa-check"></i><b>8.8</b> Discussion and next steps</a></li>
<li class="chapter" data-level="8.9" data-path="location.html"><a href="location.html#exercises-5"><i class="fa fa-check"></i><b>8.9</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>III Advanced methods</b></span></li>
<li class="chapter" data-level="9" data-path="adv-map.html"><a href="adv-map.html"><i class="fa fa-check"></i><b>9</b> Making maps with R</a><ul>
<li class="chapter" data-level="" data-path="adv-map.html"><a href="adv-map.html#prerequisites-7"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="9.1" data-path="adv-map.html"><a href="adv-map.html#introduction-6"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="adv-map.html"><a href="adv-map.html#static-maps"><i class="fa fa-check"></i><b>9.2</b> Static maps</a><ul>
<li class="chapter" data-level="9.2.1" data-path="adv-map.html"><a href="adv-map.html#tmap-basics"><i class="fa fa-check"></i><b>9.2.1</b> tmap basics</a></li>
<li class="chapter" data-level="9.2.2" data-path="adv-map.html"><a href="adv-map.html#map-objects-shapes-and-layers"><i class="fa fa-check"></i><b>9.2.2</b> Map objects, shapes and layers</a></li>
<li class="chapter" data-level="9.2.3" data-path="adv-map.html"><a href="adv-map.html#aesthetics"><i class="fa fa-check"></i><b>9.2.3</b> Aesthetics</a></li>
<li class="chapter" data-level="9.2.4" data-path="adv-map.html"><a href="adv-map.html#color-settings"><i class="fa fa-check"></i><b>9.2.4</b> Color settings</a></li>
<li class="chapter" data-level="9.2.5" data-path="adv-map.html"><a href="adv-map.html#layouts"><i class="fa fa-check"></i><b>9.2.5</b> Layouts</a></li>
<li class="chapter" data-level="9.2.6" data-path="adv-map.html"><a href="adv-map.html#faceted-maps"><i class="fa fa-check"></i><b>9.2.6</b> Faceted maps</a></li>
<li class="chapter" data-level="9.2.7" data-path="adv-map.html"><a href="adv-map.html#inset-maps"><i class="fa fa-check"></i><b>9.2.7</b> Inset maps</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="adv-map.html"><a href="adv-map.html#animated-maps"><i class="fa fa-check"></i><b>9.3</b> Animated maps</a></li>
<li class="chapter" data-level="9.4" data-path="adv-map.html"><a href="adv-map.html#interactive-maps"><i class="fa fa-check"></i><b>9.4</b> Interactive maps</a></li>
<li class="chapter" data-level="9.5" data-path="adv-map.html"><a href="adv-map.html#web-mapping-applications-with-shiny"><i class="fa fa-check"></i><b>9.5</b> Web mapping applications with shiny</a></li>
<li class="chapter" data-level="9.6" data-path="adv-map.html"><a href="adv-map.html#other-mapping-packages"><i class="fa fa-check"></i><b>9.6</b> Other mapping packages</a></li>
<li class="chapter" data-level="9.7" data-path="adv-map.html"><a href="adv-map.html#exercises-6"><i class="fa fa-check"></i><b>9.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="gis.html"><a href="gis.html"><i class="fa fa-check"></i><b>10</b> Bridges to GIS software</a><ul>
<li class="chapter" data-level="10.1" data-path="gis.html"><a href="gis.html#rqgis"><i class="fa fa-check"></i><b>10.1</b> (R)QGIS</a></li>
<li class="chapter" data-level="10.2" data-path="gis.html"><a href="gis.html#rsaga"><i class="fa fa-check"></i><b>10.2</b> (R)SAGA</a></li>
<li class="chapter" data-level="10.3" data-path="gis.html"><a href="gis.html#grass-through-rgrass7"><i class="fa fa-check"></i><b>10.3</b> GRASS through <strong>rgrass7</strong></a></li>
<li class="chapter" data-level="10.4" data-path="gis.html"><a href="gis.html#when-to-use-what"><i class="fa fa-check"></i><b>10.4</b> When to use what?</a></li>
<li class="chapter" data-level="10.5" data-path="gis.html"><a href="gis.html#exercises-7"><i class="fa fa-check"></i><b>10.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="raster-vector.html"><a href="raster-vector.html"><i class="fa fa-check"></i><b>11</b> Raster-vector interactions</a><ul>
<li class="chapter" data-level="" data-path="raster-vector.html"><a href="raster-vector.html#prerequisites-8"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="11.1" data-path="raster-vector.html"><a href="raster-vector.html#introduction-7"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="raster-vector.html"><a href="raster-vector.html#raster-cropping"><i class="fa fa-check"></i><b>11.2</b> Raster cropping</a></li>
<li class="chapter" data-level="11.3" data-path="raster-vector.html"><a href="raster-vector.html#raster-extraction"><i class="fa fa-check"></i><b>11.3</b> Raster extraction</a></li>
<li class="chapter" data-level="11.4" data-path="raster-vector.html"><a href="raster-vector.html#rasterization"><i class="fa fa-check"></i><b>11.4</b> Rasterization</a></li>
<li class="chapter" data-level="11.5" data-path="raster-vector.html"><a href="raster-vector.html#spatial-vectorization"><i class="fa fa-check"></i><b>11.5</b> Spatial vectorization</a></li>
<li class="chapter" data-level="11.6" data-path="raster-vector.html"><a href="raster-vector.html#exercises-8"><i class="fa fa-check"></i><b>11.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="algorithms-and-functions-for-geocomputation.html"><a href="algorithms-and-functions-for-geocomputation.html"><i class="fa fa-check"></i><b>12</b> Algorithms and functions for geocomputation</a><ul>
<li class="chapter" data-level="" data-path="algorithms-and-functions-for-geocomputation.html"><a href="algorithms-and-functions-for-geocomputation.html#prerequisites-9"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="12.1" data-path="algorithms-and-functions-for-geocomputation.html"><a href="algorithms-and-functions-for-geocomputation.html#geographic-algorithms"><i class="fa fa-check"></i><b>12.1</b> Geographic algorithms</a></li>
<li class="chapter" data-level="12.2" data-path="algorithms-and-functions-for-geocomputation.html"><a href="algorithms-and-functions-for-geocomputation.html#functions"><i class="fa fa-check"></i><b>12.2</b> Functions</a></li>
<li class="chapter" data-level="12.3" data-path="algorithms-and-functions-for-geocomputation.html"><a href="algorithms-and-functions-for-geocomputation.html#implementation"><i class="fa fa-check"></i><b>12.3</b> Implementation</a></li>
<li class="chapter" data-level="12.4" data-path="location.html"><a href="location.html#case-study"><i class="fa fa-check"></i><b>12.4</b> Case study</a></li>
<li class="chapter" data-level="12.5" data-path="algorithms-and-functions-for-geocomputation.html"><a href="algorithms-and-functions-for-geocomputation.html#exercises-9"><i class="fa fa-check"></i><b>12.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="spatial-cv.html"><a href="spatial-cv.html"><i class="fa fa-check"></i><b>13</b> Statistical learning for geographic data</a><ul>
<li class="chapter" data-level="" data-path="spatial-cv.html"><a href="spatial-cv.html#prerequisites-10"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="13.1" data-path="spatial-cv.html"><a href="spatial-cv.html#intro-cv"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="spatial-cv.html"><a href="spatial-cv.html#case-landslide"><i class="fa fa-check"></i><b>13.2</b> Case study: Landslide susceptibility</a></li>
<li class="chapter" data-level="13.3" data-path="spatial-cv.html"><a href="spatial-cv.html#conventional-model"><i class="fa fa-check"></i><b>13.3</b> Conventional modeling approach in R</a></li>
<li class="chapter" data-level="13.4" data-path="spatial-cv.html"><a href="spatial-cv.html#intro-cv"><i class="fa fa-check"></i><b>13.4</b> Introduction to (spatial) cross-validation</a></li>
<li class="chapter" data-level="13.5" data-path="spatial-cv.html"><a href="spatial-cv.html#spatial-cv-with-mlr"><i class="fa fa-check"></i><b>13.5</b> Spatial CV with <strong>mlr</strong></a><ul>
<li class="chapter" data-level="13.5.1" data-path="spatial-cv.html"><a href="spatial-cv.html#glm"><i class="fa fa-check"></i><b>13.5.1</b> Generalized linear model</a></li>
<li class="chapter" data-level="13.5.2" data-path="spatial-cv.html"><a href="spatial-cv.html#svm"><i class="fa fa-check"></i><b>13.5.2</b> Spatial tuning of machine-learning hyperparameters</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="spatial-cv.html"><a href="spatial-cv.html#conclusions"><i class="fa fa-check"></i><b>13.6</b> Conclusions</a></li>
<li class="chapter" data-level="13.7" data-path="spatial-cv.html"><a href="spatial-cv.html#exercises-10"><i class="fa fa-check"></i><b>13.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="http://robinlovelace.net/">Robin Lovelace</a></li>
<li><a href="https://nowosad.github.io/">Jakub Nowosad</a></li>
<li><a href="http://www.geographie.uni-jena.de/en/Muenchow.html">Jannes Muenchow</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Geocomputation with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intro" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<p>This book is about harnessing the power of modern computers to <em>do things</em> with geographic data. It teaches a range of spatial skills, including: reading, writing and manipulating geographic data; making static and interactive maps; applying geocomputation to solve real-world problems; and modeling geographic phenomena. By demonstrating how various spatial operations can be linked, in reproducible ‘code chunks’ that intersperse the prose, the book also teaches a transparent and thus scientific workflow. Learning how to use the wealth of geospatial tools available from the R command line can be exciting but creating <em>new ones</em> can be truly liberating, by removing constraints on your creativity imposed by software. By the end of the book you should be able to create new tools for geocomputation in the form of shareable R scripts and functions.</p>
<p>Over the last few decades free and open source software for geospatial data (‘FOSS4G’) has progressed at an astonishing rate (see <a href="http://foss4g.org/">foss4g.org</a>). Thanks to FOSS4G and the wider open source movement geospatial analysis is no longer the preserve of those with expensive hardware and software: anyone can now download high performance spatial libraries on their computer. However, despite the growth of geospatial software that is <em>open source</em>, much of it is still not easy to script. Open source Geographic Information Systems (GIS) such as QGIS (see <a href="http://qgis.org/en/site/">qgis.org</a>) have greatly reduced the ‘barrier to entry’ but their emphasis on the Graphical User Interface (GUI) can discourage reproducibility. This book focuses on the Command Line Interface (CLI), enabling reproducible, and ‘computational’ workflows, something we will expand on in Chapter 13. <!--\@ref(gis) --><!-- REF NEEDS TO BE FIXED IN FUTURE--></p>

<div class="rmdnote">
<p>Reproducibility is a major advantage of command-line interfaces, but what does it mean in practice? We define it as follows:</p>
<blockquote>
<p>A process is reproducible only if the same results can be generated by others using publicly accessible code.</p>
</blockquote>
This may sound simple and easy to achieve (which it is if you carefully maintain your R code in script files) but has profound implications for teaching and the scientific process <span class="citation">(Pebesma, Nüst, and Bivand <a href="#ref-pebesma_r_2012">2012</a>)</span>.
</div>
<p></p>
<p>A major aim of this book is to make geographic data analysis more accessible as part of a reproducible workflow. R is a flexible language that allows access to many spatial software libraries (see section <a href="intro.html#why-geocomputation-with-r">1.2</a>). Before going into the details of the software, however, it is worth taking a step back and thinking about what we mean by geocomputation.</p>
<div id="what-is-geocomputation" class="section level2">
<h2><span class="header-section-number">1.1</span> What is geocomputation?</h2>
<p>Geocomputation is a relatively young field with a ~30 year history, dating back to the first conference on the subject in 1996.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> <!-- todo: which chapters? --> What distinguishes geocomputation from the older quantitative geography, is its emphasis on “creative and experimental” GIS applications <span class="citation">(Longley et al. <a href="#ref-longley_geocomputation:_1998">1998</a>)</span>. Additionally, it is also about developing new, research-driven methods <span class="citation">(Openshaw and Abrahart <a href="#ref-openshaw_geocomputation_2000">2000</a>)</span>:</p>
<blockquote>
<p>GeoComputation is about using the various different types of geodata and about developing relevant geo-tools within the overall context of a ‘scientific’ approach.</p>
</blockquote>
<p>This book aims to go beyond teaching methods and code: by the end of it you should be able use your geocomputational skills, to do “practical work that is beneficial or useful” <span class="citation">(Openshaw and Abrahart <a href="#ref-openshaw_geocomputation_2000">2000</a>)</span>.</p>
<p>Our approach differs from early adopters such as Stan Openshaw in one important way, however. At the turn of the 21<sup>st</sup> Century it was unrealistic to expect readers to be able to reproduce code examples, due to barriers preventing access to the necessary hardware, software and data. Fast-forward two decades and things have progressed rapidly. Anyone with access to a laptop with ~4GB RAM can realistically expect to be able to install and run software for geocompuation on publicly accessible datasets, which are more widely available than ever before (as we’ll see in Chapter <a href="read-write.html#read-write">6</a>).<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> Unlike early works in the field all the work presented in this book is reproducible using code and example data supplied alongside the book, in R packages such as <strong>spData</strong>, the installation of which is covered in Chapter <a href="spatial-class.html#spatial-class">2</a>.</p>
<p>Reproducible geographic research is related to Geographical Data Science (GDS). This recent concept essentially combines ‘data science’ with GIS and, like geocomputation, can be defined in comparison with GIS (see Table <a href="intro.html#tab:gdsl">1.1</a>). The focus on reproducibility and a command-line interface in this book is aligned with GDS.</p>
<table>
<caption><span id="tab:gdsl">Table 1.1: </span>Differences in emphasis between the fields of Geographic Information Systems (GIS) and Geographic Data Science (GDS).</caption>
<thead>
<tr class="header">
<th align="left">Attribute</th>
<th align="left">GIS</th>
<th align="left">GDS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Home disciplines</td>
<td align="left">Geography</td>
<td align="left">Geography, Computing, Statistics</td>
</tr>
<tr class="even">
<td align="left">Software focus</td>
<td align="left">Graphical User Interface</td>
<td align="left">Code</td>
</tr>
<tr class="odd">
<td align="left">Reproducibility</td>
<td align="left">Minimal</td>
<td align="left">Maximal</td>
</tr>
</tbody>
</table>
<p>Geocomputation is young, but it builds on older fields. It can be seen as a part of Geography, which has a 2000+ year history <span class="citation">(Talbert <a href="#ref-talbert_ancient_2014">2014</a>)</span>; and an extension of <em>Geographic Information Systems</em> (GIS) <span class="citation">(Neteler and Mitasova <a href="#ref-neteler_open_2008">2008</a>)</span>, which emerged in the 1960s <span class="citation">(Coppock and Rhind <a href="#ref-coppock_history_1991">1991</a>)</span>.</p>
<p>Geography has played an important role in explaining and influencing humanity’s relationship with the natural world long before the invention of the computer, however. Alexander von Humboldt’s travels to South America in the early 1800s illustrates this role: not only did the resulting observations lay the foundations for the traditions of physical and plant geography, they also paved the way towards policies to protect the natural world <span class="citation">(Wulf <a href="#ref-wulf_invention_2015">2015</a>)</span>. This book aims to contribute to the ‘Geographic Tradition’ <span class="citation">(Livingstone <a href="#ref-livingstone_geographical_1992">1992</a>)</span> by harnessing the power of modern computers and open source software. <!-- GIS has become almost synonymous with handling spatial data on a computer, and provides a basis for excellent open source tools which can be accessed from R, as we will see in Chapter 13. --> <!-- todo - add dynamic reference to c13--></p>
<p>The book’s links to older disciplines were reflected in suggested titles for the book: <em>Geography with R</em> and <em>R for GIS</em>. Each has advantages. The former conveys the message that it comprises much more than just spatial data: non-spatial attribute data are inevitably interwoven with geometry data, and Geography is about more than where something is on the map. The latter communicates that this is a book about using R as a GIS, to perform spatial operations on <em>geographic data</em> <span class="citation">(Bivand, Pebesma, and Gómez-Rubio <a href="#ref-bivand_applied_2013">2013</a>)</span>. However, the term GIS conveys some connotations (see Table <a href="intro.html#tab:gdsl">1.1</a>) which simply fail to communicate one of R’s greatest strengths: its console-based ability to seamlessly switch between geographic and non-geographic data processing, modeling and visualization tasks. By contrast, the term geocomputation implies reproducible and creative programming. Of course, (geocomputational) algorithms are powerful tools that can become highly complex. However, all algorithms are composed of smaller parts. By teaching you its foundations and underlying structure, we aim to empower you to create your own innovative solutions to geographic data problems.</p>
</div>
<div id="why-geocomputation-with-r" class="section level2">
<h2><span class="header-section-number">1.2</span> Why Geocomputation with R?</h2>
<p>Early geographers used a variety of tools including rulers, compasses and sextants to advance knowledge about the world. However, until John Harrison invented the marine chronometer in the 18th century it had been impossible to determine the exact longitude at sea (‘the longitude problem’). Prior to his invention ships followed for centuries a line of constant latitude making each journey much longer, more expensive and often more dangerous. Nowadays this seems unimaginable with every smartphone having a GPS receiver at its disposal and a multitude of other sensors measuring the world in real-time (satellites, radar, autonomous cars, citizens, etc.). For instance, an autonomous car could create 100 GB or more per day (see e.g., this <a href="https://www.economist.com/news/science-and-technology/21696925-building-highly-detailed-maps-robotic-vehicles-autonomous-cars-reality">article</a>). Equally, earth observation data (satellite imagery) has become so big that it is impossible to analyze the corresponding data with a single computer (see <a href="http://r-spatial.org/2016/11/29/openeo.html" class="uri">http://r-spatial.org/2016/11/29/openeo.html</a>). Hence, we need computational power, software and related tools to handle and extract the most interesting patterns of this ever-increasing amount of (geo-)data. (Geo-)Databases help with data management, storing and querying such large amounts of data. Through interfaces, we can access subsets of these data for further analysis, information extraction and visualization. In this book we treat R as a ‘tool for the trade’ for the latter. <!-- What is 'the latter'? --></p>
<p>R is a multi-platform, open source language and environment for statistical computing and graphics (<a href="https://www.r-project.org/" class="uri">https://www.r-project.org/</a>). With a wide range of packages R also supports advanced geospatial statistics, modeling and visualization.<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>. At its core R is an object-oriented, <a href="http://adv-r.had.co.nz/Functional-programming.html">functional programming language</a> <span class="citation">(Wickham <a href="#ref-wickham_advanced_2014">2014</a>)</span>, and was specifically designed as an interactive interface to other software <span class="citation">(Chambers <a href="#ref-chambers_extending_2016">2016</a>)</span>. The latter also includes many ‘bridges’ to a treasure trove of GIS software, ‘geolibraries’ and functions (see Chapter <a href="gis.html#gis">10</a>). It is thus ideal for quickly creating ‘geo-tools’, without needing to master lower level languages (compared to R) such as C, FORTRAN and Java (see section <a href="intro.html#software-for-geocomputation">1.3</a>). This can feel like breaking free from the metaphorical ‘glass ceiling’ imposed by GUI-based proprietary geographic information systems (see Table <a href="intro.html#tab:gdsl">1.1</a> for a definition of GUI). What is more, advanced users might even extend R with the power of other languages (e.g., C++ through <strong>Rcpp</strong> or Python through <strong>reticulate</strong>; see also section <a href="intro.html#software-for-geocomputation">1.3</a>).</p>
<p>An example showing R’s flexibility with regard to geographic software development is its support for generating interactive maps thanks to <strong>leaflet</strong> <span class="citation">(Cheng, Karambelkar, and Xie <a href="#ref-R-leaflet">2017</a>)</span>. The packages <strong>tmap</strong> and <strong>mapview</strong> <span class="citation">(Tennekes <a href="#ref-R-tmap">2018</a><a href="#ref-R-tmap">a</a>; Appelhans et al. <a href="#ref-R-mapview">2018</a>)</span> are built on and extend <strong>leaflet</strong>. These packages help overcome the criticism that R has “limited interactive [plotting] facilities” <span class="citation">(Bivand, Pebesma, and Gómez-Rubio <a href="#ref-bivand_applied_2013">2013</a>)</span>. The code below illustrates this by generating Figure <a href="intro.html#fig:interactive">1.1</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(leaflet)
popup =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Robin&quot;</span>, <span class="st">&quot;Jakub&quot;</span>, <span class="st">&quot;Jannes&quot;</span>)
<span class="kw">leaflet</span>() %&gt;%
<span class="st">  </span><span class="kw">addProviderTiles</span>(<span class="st">&quot;NASAGIBS.ViirsEarthAtNight2012&quot;</span>) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">addAwesomeMarkers</span>(<span class="dt">lng =</span> <span class="kw">c</span>(-<span class="dv">3</span>, <span class="dv">23</span>, <span class="dv">11</span>),
                    <span class="dt">lat =</span> <span class="kw">c</span>(<span class="dv">52</span>, <span class="dv">53</span>, <span class="dv">49</span>), 
                    <span class="dt">popup =</span> popup)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:interactive"></span>
<div id="htmlwidget-ec897849c5c50a6f7846" style="width:100%;height:355.968px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-ec897849c5c50a6f7846">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["NASAGIBS.ViirsEarthAtNight2012",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addAwesomeMarkers","args":[[52,53,49],[-3,23,11],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["Robin","Jakub","Jannes"],null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[49,53],"lng":[-3,23]}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 1.1: Where the authors are from. The basemap is a tiled image of the Earth at Night provided by NASA. Interact with the online version at robinlovelace.net/geocompr, for example by zooming-in and clicking on the popups.
</p>
</div>
<p>It would have been difficult to produce Figure <a href="intro.html#fig:interactive">1.1</a> using R a few years ago, let alone as an interactive map. This illustrates R’s flexibility and how, thanks to developments such as <strong>knitr</strong> and <strong>leaflet</strong>, it can be used as an interface to other software, a theme that will recur throughout this book. The use of R code, therefore, enables teaching geocomputation with reference to reproducible examples such as that provided in <a href="intro.html#fig:interactive">1.1</a> rather than abstract concepts.</p>
</div>
<div id="software-for-geocomputation" class="section level2">
<h2><span class="header-section-number">1.3</span> Software for geocomputation</h2>
<p>R is a powerful language for geocomputation but there are many other options for spatial data analysis. Awareness of these will help situate R in the wider geospatial ecosystem, and identify when a different tool may be more appropriate for a specific task. Over time R developers have added various R interfaces (or ‘bridges’ as we call them in Chapter 13) to other software. Therefore knowing what else is out there can also be useful from an R-spatial perspective because a) there may already be a bridge to something that adds the functionality you need and b) if there’s not already a bridge there may be one on the horizon. With this motivation in mind this section briefly introduces the languages <a href="https://isocpp.org/">C++</a>, <a href="https://www.oracle.com/java/index.html">Java</a> and <a href="https://www.python.org/">Python</a> for geocomputation, with reference to R.</p>
<p>A natural choice for geocomputation would be C++ since major GIS packages (e.g., <a href="http://www.gdal.org/">GDAL</a>, <a href="www.qgis.org">QGIS</a>, <a href="https://grass.osgeo.org/">GRASS</a>, <a href="www.saga-gis.org">SAGA</a>, and even <a href="https://www.arcgis.com/">ArcGIS</a>) often rely in great parts on it. This is because well-written C++ can be blazing fast, which makes it a good choice for performance-critical applications such as the processing of large spatial data. Usually, people find it harder to learn than Python or R. It is also likely that you have to invest a lot of time to code things that are readily available in R. Therefore, we would recommend to learn R, and subsequently to learn C++ through <strong>Rcpp</strong> if a need for performance optimization arises. Subsequently, you could even implement geoalgorithms you are missing from the most common desktop GIS with the help of <strong>Rcpp</strong>^[Though, in that case we would recommend to contribute the C++ code to one of the open-source GIS packages since this would make the geoalgorithm available to a wider audience. In turn, you could access the GIS software via one of the available R-GIS interfaces (Chapter <a href="gis.html#gis">10</a>).</p>
<p>Java is another important (and versatile) language used in GIScience. For example, the open-source desktop GIS <a href="http://www.gvsig.com/en/products/gvsig-desktop">gvSig</a>, <a href="http://openjump.org/">OpenJump</a> and <a href="http://udig.refractions.net/">uDig</a> are written in Java. There are also many open source add-on libraries available for Java, including <a href="http://docs.geotools.org/">GeoTools</a> and the <a href="https://www.locationtech.org/projects/technology.jts">Java Topology Suite</a>.<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a> Furthermore, many server-based applications use Java including among others <a href="http://geonode.org/">Geoserver/Geonode</a>, <a href="http://www.deegree.org/">deegree</a> and <a href="http://52north.org/communities/geoprocessing/wps/">52°North WPS</a>.</p>
<p>Java’s object-oriented syntax is similar to that of C++ but its memory management, at least from a user’s perspective, is simpler and more robust. Java is rather unforgiving regarding class, object and variable declarations, which encourages well-designed programming structure, useful in large projects with thousands of lines of codes placed in numerous files. Following the <em>write once, run anywhere</em> principle, Java is platform-independent (which is unusual for a compiled language) and has excellent performance on large-scale systems. This makes Java a suitable language for complex architecture projects such <a href="https://github.com/rstudio/rstudio">RStudio</a>, the Integrated Development Environment (IDE) in which this book was written!</p>
<p>Java is less suitable for statistical modeling and visualization than Python or R. Although Java can be used for data science <span class="citation">(Brzustowicz <a href="#ref-brzustowicz_data_2017">2017</a>)</span>, it has relatively few statistical libraries, especially compared with R. Furthermore Java is hard to use interactively. Interpreted languages (such as R and Python) are better suited for the type of interactive workflow used in many geographic workflows than compiled languages (such as Java and C++). Unlike Java (and most other languages) R has native support for data frames and matrices, making it especially well suited for (geographic) data analysis.</p>
<p>Python is the final language for geocomputation that deserves attention in this section. Like R, Python has gained popularity due to the rapid growth of data science <span class="citation">(Robinson)</span>. Both languages are object-oriented, and have lots of further things in common. Due to their similarities there is much on-line discussion framing the relative merits of each language as a competition, as exemplified by an <a href="https://www.datacamp.com/community/tutorials/r-or-python-for-data-analysis">infographic</a> by DataCamp titled “DATA SCIENCE WARS: R vs Python”, which arguably generates more heat than light.</p>
<p>In practice both languages have their strengths and to some extent which you use is less important than the domain of application and communication of results. Learning either will provide a head-start in learning the other. However, there are major advantages of R over Python for geocomputation which explains its prominence in this book. R has unparalleled support for statistics, including spatial statistics, with hundreds of packages (unmatched by Python) supporting thousands of statistical methods.</p>
<p>The major advantage of Python is that it is a <em>general-purpose</em> programming language. It is well-suited to many applications, including desktop software, computer games, websites and data science. R, by contrast, was originally developed for statistics.<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a> This also explains Python’s larger user base compared with R’s. Python is often the only shared language between different (geocomputation) communities, explaining why it has become the ‘glue’ that holds many GIS programs together. Many geoalgorithms, including those in QGIS and ArcMap, can be accessed from the Python command line, making it well-suited as a starter language for command-line GIS.<a href="#fn6" class="footnoteRef" id="fnref6"><sup>6</sup></a></p>
<p>For spatial statistics and predictive modeling, however, R is second-to-none. This does not mean you must chose either R or Python: Python supports most common statistical techniques (though R tends to support new developments in spatial statistics earlier) and many concepts learned from Python can be applied to the R world. Like R Python also supports spatial data analysis and manipulation with packages such as <strong>osgeo</strong>, <strong>Shapely</strong>, <strong>NumPy</strong> and <strong>PyGeoProcessing</strong> <span class="citation">(Garrard <a href="#ref-garrard_geoprocessing_2016">2016</a>)</span>.</p>
</div>
<div id="rs-spatial-ecosystem" class="section level2">
<h2><span class="header-section-number">1.4</span> R’s spatial ecosystem</h2>
<!-- paragraphs (with references to chapters in the book): -->
<!-- 1. this book focus -> sf + raster/stars + leaflet/mapview (the recent state of spatial R); the history of R spatial is way longer -->
<p>There are many ways to handle spatial data in R, with dozens of packages in the area.<a href="#fn7" class="footnoteRef" id="fnref7"><sup>7</sup></a> In this book we endeavor to teach the state-of-the-art in the field whilst ensuring that the methods are future-proof. Like many areas of software development, R’s spatial ecosystem is rapidly evolving. Because R is open source, these developments can easily build on previous work, by ‘standing on the shoulders of giants’, as Isaac Newton put it in <a href="http://digitallibrary.hsp.org/index.php/Detail/Object/Show/object_id/9285">1675</a>. This approach is advantageous because it encourages collaboration and avoids ‘reinventing the wheel’. The package <strong>sf</strong> (covered in Chapter <a href="spatial-class.html#spatial-class">2</a>), for example, builds on its predecessor <strong>sp</strong>.</p>
<p>A surge in development time (and interest) in ‘R-Geo’ has followed the award of a grant by the R Consortium for the development of support for Simple Features, an open-source standard and model to store and access vector geometries. This resulted in the <strong>sf</strong> package (covered in <a href="spatial-class.html#intro-sf">2.1.1</a>). Multiple places reflect the immense interest in <strong>sf</strong>. This is especially true for the <a href="https://stat.ethz.ch/pipermail/r-sig-geo/">R-sig-Geo Archives</a>, a long-standing open access email list containing much R-spatial wisdom accumulated over the years. Many posts on the list now discuss <strong>sf</strong> and related packages, suggesting that R’s spatial software developers are using the package and, therefore, it is here to stay.</p>
<p>We even propose that the release of <strong>sf</strong> heralds a new era for spatial data analysis and geocomputation in R. This era<a href="#fn8" class="footnoteRef" id="fnref8"><sup>8</sup></a> clearly has the wind in its sails and is set to dominate future developments in R’s spatial ecosystem for years to come. So time invested in learning the ‘new ways’ of handling spatial data, and reading this book, is well spent!</p>
<div class="figure" style="text-align: center"><span id="fig:cranlogs"></span>
<img src="figures/spatial-package-growth.png" alt="The popularity of spatial packages in R. The y-axis shows the average number of downloads, within a 30-day rolling window, of R's top 5 spatial packages, defined as those with the highest number of downloads within the last 30 days." width="1050" />
<p class="caption">
Figure 1.2: The popularity of spatial packages in R. The y-axis shows the average number of downloads, within a 30-day rolling window, of R’s top 5 spatial packages, defined as those with the highest number of downloads within the last 30 days.
</p>
</div>
<p>It is noteworthy that shifts in the wider R community, as exemplified by the data processing package <strong>dplyr</strong> (released in <a href="https://cran.r-project.org/src/contrib/Archive/dplyr/">2014</a>) influenced shifts in R’s spatial ecosystem. Alongside other packages that have a shared style and emphasis on ‘tidy data’ (including e.g., <strong>ggplot2</strong>), <strong>dplyr</strong> was placed in the <strong>tidyverse</strong> ‘metapackage’ in late <a href="https://cran.r-project.org/src/contrib/Archive/tidyverse/">2016</a>. The <strong>tidyverse</strong> approach, with its focus on long-form data and fast intuitively named functions, has become immensely popular. This has led to a demand for ‘tidy spatial data’ which has been partly met by <strong>sf</strong> and other approaches such as <strong>tabularaster</strong>. An obvious feature of the <strong>tidyverse</strong> is the tendency for packages to work in harmony. Although an equivalent <strong>geoverse</strong> is presently missing, there is an on-going discussion of harmonizing R’s many spatial packages<a href="#fn9" class="footnoteRef" id="fnref9"><sup>9</sup></a> and a growing number of actively developed packages which are designed to work in harmony with <strong>sf</strong> (Table <a href="intro.html#tab:revdep">1.2</a>).</p>
<table>
<caption><span id="tab:revdep">Table 1.2: </span>The top 5 most downloaded packages that depend on sf, in terms of average number of downloads per day over the previous month. As of 2018-04-14 there are 69 packages which import sf.</caption>
<thead>
<tr class="header">
<th align="left">package</th>
<th align="right">Downloads</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">plotly</td>
<td align="right">1789</td>
</tr>
<tr class="even">
<td align="left">raster</td>
<td align="right">1559</td>
</tr>
<tr class="odd">
<td align="left">spdep</td>
<td align="right">944</td>
</tr>
<tr class="even">
<td align="left">spData</td>
<td align="right">898</td>
</tr>
<tr class="odd">
<td align="left">leaflet</td>
<td align="right">731</td>
</tr>
</tbody>
</table>
</div>
<div id="the-history-of-r-spatial" class="section level2">
<h2><span class="header-section-number">1.5</span> The history of R-spatial</h2>
<p>There are many benefits of using recent spatial packages such as <strong>sf</strong>, but it also important to be aware of the history of R’s spatial capabilities: many functions, use-cases and teaching material are contained in older packages. These can still be useful today, provided you know where to look.</p>
<p>R’s spatial capabilities originated in early spatial packages in the S language <span class="citation">(Bivand and Gebhardt <a href="#ref-bivand_implementing_2000">2000</a>)</span>. The 1990s saw the development of numerous S scripts and a handful of packages for spatial statistics. R packages arose from these and by 2000 there were R packages for various spatial methods “point pattern analysis, geostatistics, exploratory spatial data analysis and spatial econometrics”, according to an <a href="http://www.geocomputation.org/2000/GC009/Gc009.htm">article</a> presented at GeoComputation2000 <span class="citation">(Bivand and Neteler <a href="#ref-bivand_open_2000">2000</a>)</span> Some of these, notably <strong>spatial</strong>, <strong>sgeostat</strong> and <strong>splancs</strong> are still available on CRAN <span class="citation">(Rowlingson and Diggle <a href="#ref-rowlingson_splancs:_1993">1993</a>; Rowlingson and Diggle <a href="#ref-rowlingson_splancs:_2017">2017</a>; Venables and Ripley <a href="#ref-venables_modern_2002">2002</a>; University and Gebhardt <a href="#ref-university_sgeostat:_2016">2016</a>)</span>.</p>
<p>A subsequent article in R News (the predecessor of <a href="https://journal.r-project.org/">The R Journal</a>) contained an overview of spatial statistical software in R at the time, much of which was based on previous code written for S/S-PLUS <span class="citation">(Ripley <a href="#ref-ripley_spatial_2001">2001</a>)</span>. This overview described packages for spatial smoothing and interpolation (e.g., <strong>akima</strong>, <strong>spatial</strong>, <strong>sgeostat</strong> and <strong>geoR</strong>) and point pattern analysis <span class="citation">(<strong>splancs</strong> and <strong>spatstat</strong>; Akima and Gebhardt <a href="#ref-akima_akima:_2016">2016</a>; Rowlingson and Diggle <a href="#ref-rowlingson_splancs:_2017">2017</a>; Jr and Diggle <a href="#ref-jr_geor_2016">2016</a>)</span>. While all these are still available on CRAN, <strong>spatstat</strong> stands out among them, as it remains dominant in the field of spatial point pattern analysis <span class="citation">(Baddeley, Rubak, and Turner <a href="#ref-baddeley_spatial_2015">2015</a>)</span>.</p>
<p>The following R News issue (Volume 1/3) put spatial packages in the spotlight again, with an introduction to <strong>splancs</strong> and a commentary on future prospects regarding spatial statistics <span class="citation">(Bivand <a href="#ref-bivand_more_2001">2001</a>)</span>. Additionally, the issue introduced two packages for testing spatial autocorrelation that eventually became part of <strong>spdep</strong> <span class="citation">(Bivand <a href="#ref-bivand_spdep:_2017">2017</a>)</span>. Notably, the commentary mentions the need for standardization of spatial interfaces, efficient mechanisms for exchanging data with GIS, and handling of spatial metadata such as coordinate reference systems (CRS).</p>
<p><strong>maptools</strong> <span class="citation">(written by Nicholas Lewin-Koh; Bivand and Lewin-Koh <a href="#ref-bivand_maptools:_2017">2017</a>)</span> is another important package from this time. Initially <strong>maptools</strong> just contained a wrapper around <a href="http://shapelib.maptools.org/">shapelib</a> and permitted the reading of ESRI Shapefiles into geometry nested lists. The corresponding and nowadays obsolete S3 class called “Map” stored this list alongside an attribute data frame. The work on the “Map” class representation was nevertheless important since it directly fed into <strong>sp</strong> prior to its publication on CRAN.</p>
<p>In 2003, <span class="citation">Bivand (<a href="#ref-hornik_approaches_2003">2003</a>)</span> published an extended review of spatial packages. Around this time the development of R’s spatial capabilities increasingly supported interfaces to external libraries, especially to GDAL and PROJ.4. These interfaces facilitated geographic data I/O (meaning input output and covered in chapter <a href="read-write.html#read-write">6</a>) and CRS transformations, respectively. <span class="citation">Bivand (<a href="#ref-hornik_approaches_2003">2003</a>)</span> proposed a spatial data class system, including support for points, lines, polygons and grids based on GDAL’s support for a wide range of spatial data formats. All these ideas contributed to the packages <strong>rgdal</strong> and <strong>sp</strong>, which became the foundational packages for spatial data analysis with R <span class="citation">(Bivand, Pebesma, and Gómez-Rubio <a href="#ref-bivand_applied_2013">2013</a>)</span>.</p>
<p><strong>rgdal</strong> provided GDAL bindings for R which greatly extended R’s spatial capabilities in terms of access to previously unavailable spatial data formats. Initially, Tim Keitt released it in 2003 with support for raster drivers. But soon, <strong>rgdal</strong> also enabled storing information about coordinate reference system (building on top of the PROJ.4 library), allowed map projections, datum transformations and OGR vector reading. Many of these additional capabilities were thanks to Barry Rowlingson who folded them into the <strong>rgdal</strong> codebase in March 2006.<a href="#fn10" class="footnoteRef" id="fnref10"><sup>10</sup></a></p>
<p><strong>sp</strong>, released in 2005, overcame R’s inability to distinguish spatial and non-spatial objects <span class="citation">(Pebesma and Bivand <a href="#ref-pebesma_classes_2005">2005</a>)</span>. It grew from a <a href="http://spatial.nhh.no/meetings/vienna/index.html">workshop</a> before, and a session at the 2003 DSC conference in Vienna, gathering input from most interested package developers. At the same time, <a href="https://sourceforge.net/">sourceforge</a> was chosen for development collaboration (migrated to <a href="https://r-forge.r-project.org">R-Forge</a> five years later) and the <a href="https://stat.ethz.ch/mailman/listinfo/r-sig-geo">R-sig-geo mailing list</a> was started.</p>
<p>Prior to 2005, spatial coordinates were generally treated as any other number. This changed with <strong>sp</strong> as it provided generic classes and methods for spatial data. The sophisticated class system supported points, lines, polygons and grids, with and without attribute data.</p>
<!--???-->
<!-- points, multipoints, pixels, full grid, line, lines, spatial lines, polygon, polygons, spatial polygons -->
<p>Making use of the S4 class system, <strong>sp</strong> stores each piece of ‘spatially specific’ information (such as bounding box, coordinate reference system, attribute table) in slots, which are accessible via the <code>@</code> symbol. For instance, <strong>sp</strong>-classes store attribute data in the <code>data</code> slot as a <code>data.frame</code>. This enables non-spatial data operations to work alongside spatial operations (see section <a href="spatial-class.html#why-simple-features">2.1.2</a>). Additionally, <strong>sp</strong> implemented generic methods for spatial data types for well-known functions such as <code>summary()</code> and <code>plot()</code> .</p>
<p>In the following, <strong>sp</strong> classes rapidly became the go-to standard for spatial data in R, resulting in a proliferation of packages that depended on it from around 20 in 2008 and over 100 in 2013 <span class="citation">(Bivand, Pebesma, and Gómez-Rubio <a href="#ref-bivand_applied_2013">2013</a>)</span>. Now more than 450 packages rely on <strong>sp</strong>, making it an important part of the R ecosystem. <!-- https://github.com/Robinlovelace/geocompr/issues/58 --> <!-- https://github.com/edzer/sfr/issues/387#issuecomment-308949140 --></p>
<p>Prominent R packages using <strong>sp</strong> include: <strong>gstat</strong>, for spatial and spatio-temporal geostatistics; <strong>geosphere</strong>, for spherical trigonometry; and <strong>adehabitat</strong> used for the analysis of habitat selection by animals <span class="citation">(Pebesma and Graeler <a href="#ref-R-gstat">2018</a>; Calenge <a href="#ref-calenge_package_2006">2006</a>; Hijmans <a href="#ref-hijmans_geosphere:_2016">2016</a>)</span>.</p>
<p>While <strong>rgdal</strong> and <strong>sp</strong> solved many spatial issues, R was still lacking geometry calculation abilities. Therefore, Colin Rundel started to develop a package that interfaces GEOS, an open-source geometry library, during a Google Summer of Coding project in 2010. The resulting <strong>rgeos</strong> package <span class="citation">(first released in 2010; Bivand and Rundel <a href="#ref-R-rgeos">2017</a>)</span> brought geometry calculations to R by allowing functions and operators from the GEOS library to manipulate <strong>sp</strong> objects. Another limitation of <strong>sp</strong> was its limited support of raster data. The <strong>raster</strong>-package <span class="citation">(first released in 2010; Hijmans <a href="#ref-R-raster">2017</a>)</span> overcame this by providing <code>Raster*</code> classes and functions for creating, reading and writing raster data. A key feature of <strong>raster</strong> is its ability to work with datasets that are too large to fit into the main memory (RAM), thereby overcoming one of R’s major limitations when working on large raster data.<a href="#fn11" class="footnoteRef" id="fnref11"><sup>11</sup></a></p>
<p>In parallel with or partly even preceding the development of spatial classes and methods came the support for R as an interface to dedicated GIS software. The <strong>GRASS</strong> package <span class="citation">(Bivand <a href="#ref-bivand_using_2000">2000</a>)</span> and follow-on packages <strong>spgrass6</strong> and <strong>rgrass7</strong> (for GRASS GIS 6 and 7, respectively) were prominent examples in this direction <span class="citation">(Bivand <a href="#ref-bivand_spgrass6:_2016">2016</a><a href="#ref-bivand_spgrass6:_2016">b</a>; Bivand <a href="#ref-bivand_rgrass7:_2016">2016</a><a href="#ref-bivand_rgrass7:_2016">a</a>)</span>. Other examples of bridges between R and GIS include <strong>RSAGA</strong> <span class="citation">(Brenning, Bangs, and Becker <a href="#ref-R-RSAGA">2018</a>, first published in 2008)</span>, <strong>ArcGIS</strong> <span class="citation">(A. Brenning <a href="#ref-brenning_arcgis_2012">2012</a><a href="#ref-brenning_arcgis_2012">a</a>, first published in 2008)</span>, and <strong>RQGIS</strong> <span class="citation">(Muenchow, Schratz, and Brenning <a href="#ref-muenchow_rqgis:_2017">2017</a>, first published in 2016)</span>. Chapter <a href="gis.html#gis">10</a> will give a thorough introduction to open-source R/GIS bridges.</p>
<p>Map making was not a focus of R’s early spatial capabilities. But soon <strong>sp</strong> provided methods for advanced map making using both the base and lattice plotting system. Despite this, a demand for the layered grammar of graphics was growing especially after the release of <strong>ggplot2</strong> in 2007. <strong>ggmap</strong> extended <strong>ggplot2</strong>’s spatial capabilities <span class="citation">(Kahle and Wickham <a href="#ref-kahle_ggmap:_2013">2013</a>)</span>. However, its main purpose was the easy access of several APIs to automatically download map tiles (among others, Google Maps and OpenStreetmap) and subsequent plotting of these as a basemap. <!--Additionally, *ggmap** lets you use (mainly Google's) geocoding and routing services.--> Though <strong>ggmap</strong> facilitated map-making with <strong>ggplot2</strong>, one main limitation remained. To make spatial data work with the <strong>ggplot2</strong> system, one needed to <code>fortify</code> spatial objects. Basically, this means, you need to combine the coordinates and attribute slots of a spatial class object into one data frame. While this works well in the case of points, it duplicates the same information over and over again in the case of polygons, since each coordinate (vertex) of a polygon receives the attribute data of the polygon. This is especially disadvantageous if you need to deal with tens of thousands of polygons. With the introduction of simple features to R this limitation disappears, and it seems likely that this will make <strong>ggplot2</strong> the standard tool for the visualization of vector data. This might be different regarding the visualization of raster data. Raster visualization methods received a boost with the release of <strong>rasterVis</strong> <span class="citation">(Lamigueiro <a href="#ref-lamigueiro_displaying_2014">2014</a>)</span> which builds on top of the lattice system. More recently, new packages aim at easing the creation of complex, high-quality maps with minimal code. The <strong>tmap</strong> package (released in 2014) might serve as an archetype for this kind of development <span class="citation">(Tennekes <a href="#ref-R-tmap">2018</a><a href="#ref-R-tmap">a</a>)</span>. It facilitates the user-friendly creation of thematic maps with an intuitive command-line interface (see also <a href="https://cran.r-project.org/package=mapmisc"><strong>mapmisc</strong></a>) . <!-- ADD THIS LATTER --> <!-- CITE the paper Tennekes, M. (2017) tmap: Thematic Maps in R. Forthcoming in the Journal
of Statistical Software http://von-tijn.nl/tijn/research/presentations/tmap_user2017.pdf--> <strong>tmap</strong> is a sophisticated yet user friendly mapping package which works in harmony with the <strong>leaflet</strong> package (released in 2015) for interactive map making <span class="citation">(Cheng, Karambelkar, and Xie <a href="#ref-R-leaflet">2017</a>)</span>. Similarly, the <strong>mapview</strong> package builds also on top of <strong>leaflet</strong> <span class="citation">(Appelhans et al. <a href="#ref-R-mapview">2018</a>)</span> for interactive mapping based on <strong>sp</strong> or <strong>sf</strong> objects. <strong>mapview</strong> allows the access of a wide range of background maps, scale bars and more.</p>
<p>However, it is noteworthy that among all the recent developments described above, the support for simple features <span class="citation">(<strong>sf</strong>; Pebesma <a href="#ref-R-sf">2018</a>)</span> has been without doubt the most important evolution in R’s spatial ecosystem. Naturally, this is the reason why we will describe <strong>sf</strong> in detail in Chapter <a href="spatial-class.html#spatial-class">2</a>.</p>
<!-- ## How to read this book -->
</div>
<div id="exercises" class="section level2">
<h2><span class="header-section-number">1.6</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Think about the terms ‘GIS’, ‘GDS’ and ‘Geocomputation’ described above. Which is your favorite, and why?</p></li>
<li><p>Provide three reasons for using a scriptable language such as R for geocomputation instead of using an established GIS program such as QGIS.</p></li>
<li><p>Name two advantages and two disadvantages of using mature packages compared with ‘cutting edge’ packages for spatial data (for example <strong>sp</strong> vs <strong>sf</strong>).</p></li>
</ol>

</div>
</div>



<h3>References</h3>
<div id="refs" class="references">
<div id="ref-pebesma_r_2012">
<p>Pebesma, Edzer, Daniel Nüst, and Roger Bivand. 2012. “The R Software Environment in Reproducible Geoscientific Research.” <em>Eos, Transactions American Geophysical Union</em> 93 (16): 163–63. doi:<a href="https://doi.org/10.1029/2012EO160003">10.1029/2012EO160003</a>.</p>
</div>
<div id="ref-longley_geocomputation:_1998">
<p>Longley, Paul A., Sue M. Brooks, Rachael McDonnell, and Bill MacMillan, eds. 1998. <em>Geocomputation: A Primer</em>. 1 edition. Chichester, Eng. ; New York: Wiley.</p>
</div>
<div id="ref-openshaw_geocomputation_2000">
<p>Openshaw, Stan, and Robert J. Abrahart, eds. 2000. <em>Geocomputation</em>. 1 edition. London ; New York: CRC Press.</p>
</div>
<div id="ref-talbert_ancient_2014">
<p>Talbert, Richard J. A. 2014. <em>Ancient Perspectives: Maps and Their Place in Mesopotamia, Egypt, Greece, and Rome</em>. University of Chicago Press.</p>
</div>
<div id="ref-neteler_open_2008">
<p>Neteler, Markus, and Helena Mitasova. 2008. <em>Open Source GIS: A GRASS GIS Approach</em>. 3. ed. New York, NY: Springer.</p>
</div>
<div id="ref-coppock_history_1991">
<p>Coppock, J Terry, and David W Rhind. 1991. “The History of GIS.” <em>Geographical Information Systems: Principles and Applications, Vol. 1.</em> 1 (1): 21–43. <a href="https://www.geos.ed.ac.uk/~gisteac/ilw/generic_resources/books_and_papers/Thx1ARTICLE.pdf" class="uri">https://www.geos.ed.ac.uk/~gisteac/ilw/generic_resources/books_and_papers/Thx1ARTICLE.pdf</a>.</p>
</div>
<div id="ref-wulf_invention_2015">
<p>Wulf, Andrea. 2015. <em>The Invention of Nature: Alexander von Humboldt’s New World</em>. First American Edition. New York: Alfred A. Knopf.</p>
</div>
<div id="ref-livingstone_geographical_1992">
<p>Livingstone, David N. 1992. <em>The Geographical Tradition: Episodes in the History of a Contested Enterprise</em>. Oxford, UK ; Cambridge, USA: John Wiley &amp; Sons Ltd.</p>
</div>
<div id="ref-bivand_applied_2013">
<p>Bivand, Roger S., Edzer Pebesma, and Virgilio Gómez-Rubio. 2013. <em>Applied Spatial Data Analysis with R</em>. 2nd ed. 2013 edition. New York: Springer.</p>
</div>
<div id="ref-wickham_advanced_2014">
<p>Wickham, Hadley. 2014. <em>Advanced R</em>. CRC Press. <a href="http://www.crcpress.com/product/isbn/9781466586963 http://adv-r.had.co.nz http://www.crcpress.com/product/isbn/9781466586963 http://adv-r.had.co.nz" class="uri">http://www.crcpress.com/product/isbn/9781466586963 http://adv-r.had.co.nz http://www.crcpress.com/product/isbn/9781466586963 http://adv-r.had.co.nz</a>.</p>
</div>
<div id="ref-chambers_extending_2016">
<p>Chambers, John M. 2016. <em>Extending R</em>. CRC Press.</p>
</div>
<div id="ref-R-leaflet">
<p>Cheng, Joe, Bhaskar Karambelkar, and Yihui Xie. 2017. <em>Leaflet: Create Interactive Web Maps with the JavaScript ’Leaflet’ Library</em>. <a href="https://CRAN.R-project.org/package=leaflet" class="uri">https://CRAN.R-project.org/package=leaflet</a>.</p>
</div>
<div id="ref-R-tmap">
<p>Tennekes, Martijn. 2018a. <em>Tmap: Thematic Maps</em>. <a href="https://github.com/mtennekes/tmap" class="uri">https://github.com/mtennekes/tmap</a>.</p>
</div>
<div id="ref-R-mapview">
<p>Appelhans, Tim, Florian Detsch, Christoph Reudenbach, and Stefan Woellauer. 2018. <em>Mapview: Interactive Viewing of Spatial Data in R</em>. <a href="https://CRAN.R-project.org/package=mapview" class="uri">https://CRAN.R-project.org/package=mapview</a>.</p>
</div>
<div id="ref-brzustowicz_data_2017">
<p>Brzustowicz, Michael R. 2017. <em>Data Science with Java: [Practical Methods for Scientists and Engineers]</em>. First edition. Beijing Boston Farnham: O´Reilly.</p>
</div>
<div id="ref-garrard_geoprocessing_2016">
<p>Garrard, Chris. 2016. <em>Geoprocessing with Python</em>. Shelter Island, NY: Manning Publications.</p>
</div>
<div id="ref-bivand_implementing_2000">
<p>Bivand, Roger, and Albrecht Gebhardt. 2000. “Implementing Functions for Spatial Statistical Analysis Using the Language.” <em>Journal of Geographical Systems</em> 2 (3): 307–17. <a href="http://www.springerlink.com/index/CJRPUMB78JUYH54W.pdf" class="uri">http://www.springerlink.com/index/CJRPUMB78JUYH54W.pdf</a>.</p>
</div>
<div id="ref-bivand_open_2000">
<p>Bivand, Roger, and Markus Neteler. 2000. “Open Source Geocomputation: Using the R Data Analysis Language Integrated with GRASS GIS and PostgreSQL Data Base Systems.” In <em>Proceedings of the 5th International Conference on GeoComputation</em>, edited by Markus Neteler and Roger S. Bivand. <a href="http://www.geocomputation.org/2000/GC009/Gc009.htm" class="uri">http://www.geocomputation.org/2000/GC009/Gc009.htm</a>.</p>
</div>
<div id="ref-rowlingson_splancs:_1993">
<p>Rowlingson, B. S, and P. J Diggle. 1993. “Splancs: Spatial Point Pattern Analysis Code in S-Plus.” <em>Computers &amp; Geosciences</em> 19 (5): 627–55. doi:<a href="https://doi.org/10.1016/0098-3004(93)90099-Q">10.1016/0098-3004(93)90099-Q</a>.</p>
</div>
<div id="ref-rowlingson_splancs:_2017">
<p>Rowlingson, Barry, and Peter Diggle. 2017. <em>Splancs: Spatial and Space-Time Point Pattern Analysis</em>. <a href="https://CRAN.R-project.org/package=splancs" class="uri">https://CRAN.R-project.org/package=splancs</a>.</p>
</div>
<div id="ref-venables_modern_2002">
<p>Venables, W. N., and B. D. Ripley. 2002. <em>Modern Applied Statistics with S</em>. Fourth. New York: Springer. <a href="http://www.stats.ox.ac.uk/pub/MASS4" class="uri">http://www.stats.ox.ac.uk/pub/MASS4</a>.</p>
</div>
<div id="ref-university_sgeostat:_2016">
<p>University, S. original by James J. Majure Iowa State, and R. port + extensions by Albrecht Gebhardt. 2016. <em>Sgeostat: An Object-Oriented Framework for Geostatistical Modeling in S+</em>. <a href="https://CRAN.R-project.org/package=sgeostat" class="uri">https://CRAN.R-project.org/package=sgeostat</a>.</p>
</div>
<div id="ref-ripley_spatial_2001">
<p>Ripley, Brian D. 2001. “Spatial Statistics in R.” <em>R News</em> 1 (2): 14–15.</p>
</div>
<div id="ref-akima_akima:_2016">
<p>Akima, Hiroshi, and Albrecht Gebhardt. 2016. <em>Akima: Interpolation of Irregularly and Regularly Spaced Data</em>. <a href="https://CRAN.R-project.org/package=akima" class="uri">https://CRAN.R-project.org/package=akima</a>.</p>
</div>
<div id="ref-jr_geor_2016">
<p>Jr, Paulo J. Ribeiro, and Peter J. Diggle. 2016. <em>GeoR: Analysis of Geostatistical Data</em>. <a href="https://CRAN.R-project.org/package=geoR" class="uri">https://CRAN.R-project.org/package=geoR</a>.</p>
</div>
<div id="ref-baddeley_spatial_2015">
<p>Baddeley, Adrian, Ege Rubak, and Rolf Turner. 2015. <em>Spatial Point Patterns: Methodology and Applications with R</em>. CRC Press.</p>
</div>
<div id="ref-bivand_more_2001">
<p>Bivand, Roger. 2001. “More on Spatial Data Analysis.” <em>R News</em> 1 (3): 13–17.</p>
</div>
<div id="ref-bivand_spdep:_2017">
<p>Bivand, Roger. 2017. <em>Spdep: Spatial Dependence: Weighting Schemes, Statistics and Models</em>. <a href="https://CRAN.R-project.org/package=spdep" class="uri">https://CRAN.R-project.org/package=spdep</a>.</p>
</div>
<div id="ref-bivand_maptools:_2017">
<p>Bivand, Roger, and Nicholas Lewin-Koh. 2017. <em>Maptools: Tools for Reading and Handling Spatial Objects</em>. <a href="https://CRAN.R-project.org/package=maptools" class="uri">https://CRAN.R-project.org/package=maptools</a>.</p>
</div>
<div id="ref-hornik_approaches_2003">
<p>Bivand, Roger. 2003. “Approaches to Classes for Spatial Data in R.” In <em>Proceedings of DSC</em>, edited by Kurt Hornik, Friedrich Leisch, and Achim Zeileis. <a href="https://www.r-project.org/nosvn/conferences/DSC-2003/Proceedings/Bivand.pdf" class="uri">https://www.r-project.org/nosvn/conferences/DSC-2003/Proceedings/Bivand.pdf</a>.</p>
</div>
<div id="ref-pebesma_classes_2005">
<p>Pebesma, Edzer J., and Roger S. Bivand. 2005. “Classes and Methods for Spatial Data in R.” <em>R News</em> 5 (2): 9–13. <a href="https://CRAN.R-project.org/doc/Rnews/" class="uri">https://CRAN.R-project.org/doc/Rnews/</a>.</p>
</div>
<div id="ref-R-gstat">
<p>Pebesma, Edzer, and Benedikt Graeler. 2018. <em>Gstat: Spatial and Spatio-Temporal Geostatistical Modelling, Prediction and Simulation</em>. <a href="https://CRAN.R-project.org/package=gstat" class="uri">https://CRAN.R-project.org/package=gstat</a>.</p>
</div>
<div id="ref-calenge_package_2006">
<p>Calenge, C. 2006. “The Package Adehabitat for the R Software: Tool for the Analysis of Space and Habitat Use by Animals.” <em>Ecological Modelling</em> 197: 1035.</p>
</div>
<div id="ref-hijmans_geosphere:_2016">
<p>Hijmans, Robert J. 2016. <em>Geosphere: Spherical Trigonometry</em>. <a href="https://CRAN.R-project.org/package=geosphere" class="uri">https://CRAN.R-project.org/package=geosphere</a>.</p>
</div>
<div id="ref-R-rgeos">
<p>Bivand, Roger, and Colin Rundel. 2017. <em>Rgeos: Interface to Geometry Engine - Open Source (’GEOS’)</em>. <a href="https://CRAN.R-project.org/package=rgeos" class="uri">https://CRAN.R-project.org/package=rgeos</a>.</p>
</div>
<div id="ref-R-raster">
<p>Hijmans, Robert J. 2017. <em>Raster: Geographic Data Analysis and Modeling</em>. <a href="https://CRAN.R-project.org/package=raster" class="uri">https://CRAN.R-project.org/package=raster</a>.</p>
</div>
<div id="ref-bivand_using_2000">
<p>Bivand, Roger S. 2000. “Using the R Statistical Data Analysis Language on GRASS 5.0 GIS Database Files.” <em>Computers &amp; Geosciences</em> 26 (9): 1043–52. <a href="http://www.sciencedirect.com/science/article/pii/S0098300400000571" class="uri">http://www.sciencedirect.com/science/article/pii/S0098300400000571</a>.</p>
</div>
<div id="ref-bivand_spgrass6:_2016">
<p>Bivand, Roger. 2016b. <em>Spgrass6: Interface Between GRASS 6 and R</em>. <a href="http://CRAN.R-project.org/package=spgrass6" class="uri">http://CRAN.R-project.org/package=spgrass6</a>.</p>
</div>
<div id="ref-bivand_rgrass7:_2016">
<p>Bivand, Roger. 2016a. <em>Rgrass7: Interface Between GRASS 7 Geographical Information System and R</em>. <a href="https://CRAN.R-project.org/package=rgrass7" class="uri">https://CRAN.R-project.org/package=rgrass7</a>.</p>
</div>
<div id="ref-R-RSAGA">
<p>Brenning, Alexander, Donovan Bangs, and Marc Becker. 2018. <em>RSAGA: SAGA Geoprocessing and Terrain Analysis</em>. <a href="https://CRAN.R-project.org/package=RSAGA" class="uri">https://CRAN.R-project.org/package=RSAGA</a>.</p>
</div>
<div id="ref-brenning_arcgis_2012">
<p>Brenning, Alexander. 2012a. <em>ArcGIS Geoprocessing in R via Python</em>. <a href="https://CRAN.R-project.org/package=RPyGeo" class="uri">https://CRAN.R-project.org/package=RPyGeo</a>.</p>
</div>
<div id="ref-muenchow_rqgis:_2017">
<p>Muenchow, Jannes, Patrick Schratz, and Alexander Brenning. 2017. “RQGIS: Integrating R with QGIS for Statistical Geocomputing.” <em>The R Journal</em> 9 (2): 409–28.</p>
</div>
<div id="ref-kahle_ggmap:_2013">
<p>Kahle, David, and Hadley Wickham. 2013. “Ggmap: Spatial Visualization with Ggplot2.” <em>The R Journal</em> 5 (1): 144–61. <a href="http://journal.r-project.org/archive/2013-1/kahle-wickham.pdf" class="uri">http://journal.r-project.org/archive/2013-1/kahle-wickham.pdf</a>.</p>
</div>
<div id="ref-lamigueiro_displaying_2014">
<p>Lamigueiro, Óscar Perpiñán. 2014. <em>Displaying Time Series, Spatial, and Space-Time Data with R</em>. CRC Press.</p>
</div>
<div id="ref-R-sf">
<p>Pebesma, Edzer. 2018. <em>Sf: Simple Features for R</em>. <a href="https://CRAN.R-project.org/package=sf" class="uri">https://CRAN.R-project.org/package=sf</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>The conference took place at the University of Leeds, where one of the authors (Robin) is currently based and where the 21<sup>st</sup> GeoComputation was hosted in 2017 (see <a href="http://www.geocomputation.org/">geocomputation.org</a>).<a href="intro.html#fnref1">↩</a></p></li>
<li id="fn2"><p>A laptop with 4GB running a modern operating system such as Ubuntu 16.04 onwards should also be able to reproduce the contents of this book. A laptop with this specification or above can be acquired second-hand for ~$100 in many countries nowadays, reducing the financial/hardware barrier to geocomputation far below the levels in operation in the early 2000s, when high-performance computers were unaffordable for most people.<a href="intro.html#fnref2">↩</a></p></li>
<li id="fn3"><p>The integrated development environment (IDE) <a href="https://www.rstudio.com/">RStudio</a> deserves mention here from a user perspective as it has made the interactive use of R more accessible<a href="intro.html#fnref3">↩</a></p></li>
<li id="fn4"><p>Please note, that GEOS is a C++ port of the Java Topology Suite.<a href="intro.html#fnref4">↩</a></p></li>
<li id="fn5"><p>R has been extended in various directions, notably in <strong>shiny</strong>, a package for developing interactive we applications in R.<a href="intro.html#fnref5">↩</a></p></li>
<li id="fn6"><p>Python modules providing access to geoalgorithms include <code>grass.script</code> for GRASS (<a href="https://grasswiki.osgeo.org/wiki/GRASS_and_Python" class="uri">https://grasswiki.osgeo.org/wiki/GRASS_and_Python</a>), <code>saga-python</code> for SAGA-GIS (<a href="http://saga-python.readthedocs.io/en/latest/" class="uri">http://saga-python.readthedocs.io/en/latest/</a>), <code>processing</code> for QGIS and <code>arcpy</code> for ArcGIS.<a href="intro.html#fnref6">↩</a></p></li>
<li id="fn7"><p>An overview of R’s spatial ecosystem can be found in the CRAN Task View on the Analysis of Spatial Data (see <a href="https://cran.r-project.org/web/views/Spatial.html">cran.r-project.org/web/views/Spatial.html</a>).<a href="intro.html#fnref7">↩</a></p></li>
<li id="fn8"><p>We refrain from labeling it the <strong>geoverse</strong> with any seriousness awaiting a better name!<a href="intro.html#fnref8">↩</a></p></li>
<li id="fn9"><p>See the <a href="https://github.com/r-spatial/">r-spatial</a> organisation and conversations in the <a href="https://github.com/r-spatial/discuss/issues/11">discussion</a> repo for more on this.<a href="intro.html#fnref9">↩</a></p></li>
<li id="fn10"><p>A presentation at the 2003 DSC conference in Vienna gives the background as he saw it then <span class="citation">(Rowlingson et al. <a href="#ref-rowlingson_rasp:_2003">2003</a>)</span>; see also his announcement of the <strong>Rmap</strong> package on <a href="https://stat.ethz.ch/pipermail/r-help/2003-January/028413.html">R-help</a> in early 2003.<a href="intro.html#fnref10">↩</a></p></li>
<li id="fn11"><p>The <strong>raster</strong> package also provided tools for raster algebra, general raster functions and the development of more additional raster functions.<a href="intro.html#fnref11">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="preface.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="spatial-class.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Robinlovelace/geocompr/edit/master/01-introduction.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
